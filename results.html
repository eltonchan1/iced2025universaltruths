<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>ICED 2025: Survey Results!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background: url('Images/backgroundig225.png') no-repeat center center fixed;
      background-size: cover;
      color: #FFFFFF;
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    a {
      color: #FFFFFF;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    img.responsive {
      width: 100%;
      height: auto;
    }

    .nav-table {
      width: 100%;
      border-spacing: 0;
    }

    .nav-table td {
      padding: 0 5px;
    }

    .nav-table img {
      width: 146px;
      height: 50px;
      max-width: 100%;
      height: auto;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 40px 20px;
      align-items: start;
      justify-items: center;
      margin: 40px 0;
    }

    .grid-item img {
      width: 200px;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
    }

    .grid-item h2 {
      margin: 10px 0 5px;
    }

    .grid-item p {
      margin: 0;
      padding: 0 10px;
    }

    footer {
      margin-top: 40px;
    }

    .chart-container {
      margin: 40px 0;
    }

    .legend-container {
      max-height: 150px;
      overflow-y: auto;
      text-align: left;
      margin: 0 auto;
      width: fit-content;
    }

    .legend-item {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
    }

    .legend-color-box {
      width: 12px;
      height: 12px;
      margin-right: 8px;
      display: inline-block;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="Images/header.png" alt="Header" class="responsive">
    <table class="nav-table">
      <tr>
        <td><a href="index.html"><img src="Images/homeoff.png" alt="Home" id="Image3"></a></td>
        <td><a href="about.html"><img src="Images/aboutoff.png" alt="About" id="Image7"></a></td>
        <td><a href="survey.html"><img src="Images/surveyoff.png" alt="Survey" id="Image10"></a></td>
        <td><a href="results.html"><img src="Images/resultsoff.png" alt="Results" id="Image6"></a></td>
      </tr>
    </table>

    <img src="Images/hero image.png" alt="Hero" class="responsive">

    <h1>Results of the Survey!</h1>

    <!-- Chart Sections -->
    <div class="chart-container">
      <canvas id="chart1"></canvas>
      <div id="legend1" class="legend-container"></div>
    </div>

    <div class="chart-container">
      <canvas id="chart2"></canvas>
      <div id="legend2" class="legend-container"></div>
    </div>

    <!-- Add more chart containers as needed -->

    <!-- Grid Section -->
    <div class="grid">
      <div class="grid-item">
        <a href="about.html"><img src="Images/world200.png" alt="About"></a>
        <a href="about.html">
          <h2>About Us</h2>
          <p>Who are we and why did we do this?</p>
        </a>
      </div>
      <div class="grid-item">
        <a href="survey.html"><img src="Images/survey200.png" alt="Survey"></a>
        <a href="survey.html">
          <h2>Take the Survey</h2>
          <p>Take our survey to help support our research!</p>
        </a>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <img src="Images/footer.png" alt="Footer" class="responsive" usemap="#Map">
      <map name="Map">
        <area shape="circle" coords="704,80,25" href="https://www.instagram.com/universaltruths.2025/" target="_blank" alt="Instagram">
      </map>
    </footer>
  </div>

  <script>
    // Function to fetch data from your backend service
    async function fetchData(questionNumber) {
      // Replace the URL with your backend endpoint
      const response = await fetch(`https://your-backend-service.com/api/question${questionNumber}`);
      const data = await response.json();
      return data;
    }

    // Function to create a pie chart
    async function createPieChart(chartId, legendId, questionNumber, titleText) {
      const data = await fetchData(questionNumber);

      const ctx = document.getElementById(chartId).getContext('2d');
      const chart = new Chart(ctx, {
        type: 'pie',
        data: {
          labels: data.labels,
          datasets: [{
            data: data.values,
            backgroundColor: data.colors,
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              display: false
            },
            title: {
              display: true,
              text: titleText
            }
          }
        }
      });

      // Generate custom legend
      const legendContainer = document.getElementById(legendId);
      data.labels.forEach((label, index) => {
        const item = document.createElement('div');
        item.classList.add('legend-item');

        const colorBox = document.createElement('span');
        colorBox.classList.add('legend-color-box');
        colorBox.style.backgroundColor = data.colors[index];

        const text = document.createElement('span');
        text.textContent = `${label}: ${data.values[index]}`;

        item.appendChild(colorBox);
        item.appendChild(text);
        legendContainer.appendChild(item);
      });
    }

    // Create charts
    createPieChart('chart1', 'legend1', 1, 'Survey Question 1');
    createPieChart('chart2', 'legend2', 2, 'Survey Question 2');
    // Add more charts as needed
  </script>
</body>
</html>
